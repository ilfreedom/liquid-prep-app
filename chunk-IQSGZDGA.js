import{$a as s,$b as q,$c as Y,Aa as I,Ab as j,Ae as dt,Bd as X,Cd as Z,Ce as mt,Dd as $,Eb as R,Ed as tt,Ha as n,Hd as et,Ia as c,Id as it,Ja as g,Kd as ot,Ld as rt,M as u,Mc as A,Na as S,Nc as H,Nd as nt,Od as at,Pc as z,Qa as v,S as w,Sa as d,Sc as G,T as h,Va as b,Vc as U,Wc as W,Wd as ct,Xa as F,Xc as Q,Y as C,Ya as O,Z as _,Za as P,Zd as lt,_c as J,ab as T,be as st,cc as y,eb as N,fb as D,gb as E,ge as pt,id as K,ja as M,ka as l,la as f,q as k,t as L,wa as x,wb as V,ya as m,zb as B}from"./chunk-AKM6S3H4.js";var Ct=["searchbar"];function _t(e,t){e&1&&(n(0,"div",7)(1,"div"),g(2,"mat-spinner",8),c(),n(3,"p"),s(4,"Loading..."),c()())}function xt(e,t){if(e&1){let r=S();n(0,"mat-grid-tile")(1,"mat-card",20),v("click",function(){let i=C(r).$implicit,a=d(3);return _(a.addCrop(i))}),g(2,"img",21),n(3,"mat-card-footer")(4,"mat-card-title",22),s(5),c()()()()}if(e&2){let r=t.$implicit;l(2),b("src",r.url,M),b("alt",r.cropName),l(3),T(r.cropName)}}function vt(e,t){if(e&1&&(n(0,"div",17)(1,"mat-grid-list",18),x(2,xt,6,3,"mat-grid-tile",19),c()()),e&2){let r=d(2);l(2),m("ngForOf",r.filterFunction())}}function bt(e,t){if(e&1&&(n(0,"div")(1,"mat-card"),g(2,"img",23),c()()),e&2){let r=d(2);l(2),b("src",r.NO_NEW_CROPS,M)}}function Mt(e,t){if(e&1){let r=S();n(0,"div",9)(1,"mat-toolbar",10)(2,"mat-toolbar-row",11)(3,"button",12)(4,"mat-icon"),s(5,"search"),c()(),n(6,"input",13),E("ngModelChange",function(i){C(r);let a=d();return D(a.searchText,i)||(a.searchText=i),_(i)}),c(),n(7,"button",14),v("click",function(){C(r);let i=d();return _(i.searchClose())}),n(8,"mat-icon"),s(9,"close"),c()()()(),x(10,vt,3,1,"div",15)(11,bt,3,1,"div",16),c()}if(e&2){let r=d();l(),I("active",r.toggleSearch),l(5),N("ngModel",r.searchText),l(4),m("ngIf",r.cropsList),l(),m("ngIf",!r.cropsList||r.cropsList.length===0)}}var gt=(()=>{let t=class t{isAlreadyRendered(o){return this.renderedHeadings.has(o)?!0:(this.renderedHeadings.add(o),!1)}constructor(o,i,a,p){this.router=o,this.location=i,this.cropService=a,this.headerService=p,this.searchText="",this.headerConfig={headerTitle:"Add a new crop",leftIconName:"close",rightIconName:"search",leftBtnClick:this.handleLeftClick.bind(this),rightBtnClick:null},this.toggleSearch=!1,this.NO_NEW_CROPS="../../assets/crops-images/noNewCrops.PNG",this.requestingCrop=!0,this.renderedHeadings=new Set}ngOnInit(){this.headerService.updateHeader(this.headerConfig),this.requestingCrop=!0,L({cropsListData:this.cropService.getCropListFromApi(),myCrops:k(this.cropService.getLocalStorageMyCrops())}).subscribe(o=>{let i=o.cropsListData,a=o.myCrops;this.cropsList=i.filter(p=>!a.some(ht=>ht.id===p.id)),console.log("select cropsList:",this.cropsList),this.requestingCrop=!1},o=>{alert("Could not get crop list: "+o),this.requestingCrop=!1})}backClicked(){this.location.back()}onHeaderClick(o){o=="leftBtn"&&this.backClicked()}handleLeftClick(){this.backToMyCrops()}backToMyCrops(){this.location.back()}openSearch(){this.toggleSearch=!0,this.searchbar.nativeElement.focus()}searchClose(){this.searchText="",this.toggleSearch=!1}addCrop(o){this.router.navigateByUrl("/seed-date/"+o.id).then(i=>{})}filterFunction(){return this.searchText===null||this.searchText===""?this.cropsList:this.cropsList.filter(o=>o.cropName.includes(this.searchText))}};t.\u0275fac=function(i){return new(i||t)(f(q),f(V),f(X),f(Z))},t.\u0275cmp=w({type:t,selectors:[["app-select-crop"]],viewQuery:function(i,a){if(i&1&&F(Ct,5),i&2){let p;O(p=P())&&(a.searchbar=p.first)}},decls:12,vars:2,consts:[[1,"custom-toolbar"],["mat-icon-button","","aria-label","LeftButton",1,"blue-icon",3,"click"],[1,"toolbar-title"],[1,"toolbar-spacer"],["mat-icon-button","","aria-label","RightButton",1,"blue-icon"],["fxFlexFill","","fxLayout","column","fxLayoutGap","25px","fxLayoutAlign","center center",4,"ngIf"],["class","add-crop","style","overflow-x:hidden;","fxFlexFill","","cdkScrollable","",4,"ngIf"],["fxFlexFill","","fxLayout","column","fxLayoutGap","25px","fxLayoutAlign","center center"],["diameter","100","color","primary"],["fxFlexFill","","cdkScrollable","",1,"add-crop",2,"overflow-x","hidden"],[1,"search-block","mat-elevation-z4"],[2,"padding","0 5px"],["mat-icon-button","","disabled","",1,"search-icon"],["type","text","placeholder","Search",1,"search-control",3,"ngModelChange","ngModel"],["mat-button","",3,"click"],["class","cropsList",4,"ngIf"],[4,"ngIf"],[1,"cropsList"],["cols","2","rowHeight","229","gutterSize","2px",1,"grid"],[4,"ngFor","ngForOf"],[3,"click"],["mat-card-image","",1,"cardImage",3,"src","alt"],[1,"cardTittle"],["mat-card-image","",1,"cardImage",3,"src"]],template:function(i,a){i&1&&(n(0,"mat-toolbar",0)(1,"button",1),v("click",function(){return a.handleLeftClick()}),n(2,"mat-icon"),s(3,"arrow_back"),c()(),n(4,"span",2),s(5,"Select a crop"),c(),g(6,"span",3),n(7,"button",4)(8,"mat-icon"),s(9,"volume_up"),c()()(),x(10,_t,5,0,"div",5)(11,Mt,12,5,"div",6)),i&2&&(l(10),m("ngIf",a.requestingCrop),l(),m("ngIf",!a.requestingCrop))},dependencies:[B,j,W,Q,Y,J,H,A,z,G,K,U,$,et,it,tt,rt,ot,ct,lt,st,nt],styles:[`header[_ngcontent-%COMP%], .search-block[_ngcontent-%COMP%], .add-crop-header[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:11;transition:all .25s ease-in-out}.cropsList[_ngcontent-%COMP%]{max-width:360px;margin:auto}.add-crop-header.hidden[_ngcontent-%COMP%]{opacity:0}.button[_ngcontent-%COMP%]{text-transform:uppercase}.custom-toolbar[_ngcontent-%COMP%]{background-color:#edf5ff;padding:0 5px}.toolbar-title[_ngcontent-%COMP%]{color:#262626;padding-left:10%}.blue-icon[_ngcontent-%COMP%]{color:#2f4ffe}.search-block[_ngcontent-%COMP%]{width:0;right:0;background:#fff}.search-block.active[_ngcontent-%COMP%]{width:100%}.search-block[_ngcontent-%COMP%]   .search-control[_ngcontent-%COMP%]{flex:1;font-size:1rem;border:0;outline:none;padding-left:10px}.grid[_ngcontent-%COMP%]{margin-top:50px;margin-left:16px;margin-right:16px}mat-card[_ngcontent-%COMP%]{margin:4px;border:2px solid #F5F5F6}.cardImage[_ngcontent-%COMP%]{margin-bottom:0}.cardTittle[_ngcontent-%COMP%]{padding:8px;font-weight:100}[_nghost-%COMP%]     mat-card{flex-grow:1}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]     .toolbar-title{padding-left:0;width:100%;text-align:center}
/*# sourceMappingURL=select-crop.component-4YFUDFI4.css.map */`]});let e=t;return e})();var St=[{path:"",component:gt}],ut=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=h({type:t}),t.\u0275inj=u({imports:[y.forChild(St),y]});let e=t;return e})();var Kt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=h({type:t}),t.\u0275inj=u({imports:[R,dt,ut,mt,pt,at]});let e=t;return e})();export{Kt as SelectCropModule};
//# sourceMappingURL=chunk-IQSGZDGA.js.map
